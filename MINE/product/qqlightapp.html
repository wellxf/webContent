<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <meta itemprop="name" content="QQ物联deviceAPI" />
  <meta itemprop="description" content="QQ物联轻APP前端deviceAPI demo页" />
  <meta itemprop="image" content="http://wa-ou.com/images/lightapp-logo.png" />
  <title>挖藕自供电蓝牙开关</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
  <style>html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{line-height:1.6;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;background-color:#f1f0f6}*{margin:0;padding:0}button{font-family:inherit;font-size:100%;margin:0;*font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}ul,ol{padding-left:0;list-style-type:none}a{text-decoration:none}.text_box{background-color:#fff;margin:30px 0;padding:0 15px}.label_box{background-color:#fff}.label_item{padding-left:15px}.label_inner{padding-top:10px;padding-bottom:10px;min-height:24px;position:relative}.label_inner:before{content:" ";position:absolute;left:0;top:0;width:200%;height:1px;border-top:1px solid #ededed;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(0.5);transform:scale(0.5);top:auto;bottom:-2px}.lbox_close{position:relative}.lbox_close:before{content:" ";position:absolute;left:0;top:0;width:200%;height:1px;border-top:1px solid #ededed;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(0.5);transform:scale(0.5)}.lbox_close:after{content:" ";position:absolute;left:0;top:0;width:200%;height:1px;border-top:1px solid #ededed;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(0.5);transform:scale(0.5);top:auto;bottom:-2px}.lbox_close .label_item:last-child .label_inner:before{display:none}.interface_block{margin-top:15px}.interface_list{list-style:decimal}.interface_list li{margin-left:20px;margin-top:15px}.version{float:right;background-color:#5cb85c;padding:1px 5px;margin-left:5px;font-size:12px;color:#fff;text-align:center;border-radius:5px}.btn{display:block;margin-left:auto;margin-right:auto;padding-left:14px;padding-right:14px;font-size:18px;text-align:center;text-decoration:none;overflow:visible;height:42px;border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;color:#fff;line-height:42px;-webkit-tap-highlight-color:rgba(255,255,255,0)}.btn.btn_inline{display:inline-block}.btn_primary{background-color:green}.btn_primary:not(.btn_disabled):visited{color:#fff}.btn_primary:not(.btn_disabled):active{color:rgba(255,255,255,0.9);background-color:#039702}button.btn{width:100%;border:0;outline:0;-webkit-appearance:none}button.btn:focus{outline:0}.wxapi_container{font-size:16px}.code{font-size:14px;font-weight:400;line-height:2em;color:#8d8c92;width:100%;word-break:break-all}.wxapi_index_item a{display:block;color:#3e3e3e;-webkit-tap-highlight-color:rgba(0,0,0,0)}.wxapi_form{background-color:#fff;padding:0 15px;margin-top:30px;padding-bottom:15px}.btn{margin-bottom:15px}.fn{width:15px;color:white;position:fixed;text-align:center;bottom:30px;right:10px;z-index:10;background-color:#4891b2;line-height:normal;font-size:15px;padding:5px;border-radius:5px}.log{color:gray;word-break:break-all;border-bottom:1px dashed gray}</style>
 </head>
 <body>
  <div class="text_box" style="height:50px;line-height:50px;font-size:18px;margin-top:0;">
   QQVersion：
   <span id="QQVersion"></span>
  </div>
  <a class="fn" href="#">返回顶部</a>
  <div class="wxapi_container">
   <div class="wxapi_index_container">
    <h3 class="label_box" style="padding-left:15px;">导航</h3>
    <ul class="label_box lbox_close wxapi_index_list">
     <li class="label_item wxapi_index_item"><a class="label_inner" href="#menu-basic">基础接口</a></li>
     <li class="label_item wxapi_index_item"><a class="label_inner" href="#menu-video">视频接口</a></li>
     <li class="label_item wxapi_index_item"><a class="label_inner" href="#menu-image">图像接口</a></li>
     <li class="label_item wxapi_index_item"><a class="label_inner" href="#menu-chat">消息通道接口</a></li>
     <li class="label_item wxapi_index_item"><a class="label_inner" href="#menu-share">分享接口</a></li>
     <li class="label_item wxapi_index_item"><a class="label_inner" href="#menu-open-api">OpenAPI开放接口</a></li>
    </ul>
   </div>
   <div class="text_box">
    <h3>注意</h3>
    <p>1. 阅读<a href="http://iot.open.qq.com/wiki/index.html#!APP/deviceAPI.md">QQ物联轻APP前端deviceAPI文档</a></p>
    <p>2. 本页面需在QQ物联轻APP的webview内打开</p>
    <p>3. 以下代码可修改，点击代码下方按钮执行</p>
   </div>
   <div class="lbox_close wxapi_form" id="api_all">
    <div class="interface_block">
     <h3 id="menu-basic">基础接口</h3>
     <ul class="interface_list">
      <li>调试模式下的日志接口</li>
      <textarea class="code"> device.debug = false; // 关闭调试模式 device.log('没开启调试模式看不到这条log'); device.debug = true; // 开启调试模式 device.log('开启了调试模式才能看到log', 'yellow'); device.log('标题栏可以拖动', '#f0f'); </textarea>
      <button class="btn btn_primary">device.log</button>
      <li>检查API是否可用</li>
      <textarea class="code"> device.checkApi({ list : ['send', 'sendShareMsg'], // API列表 onSuccess : function (ret) { // 检查结果 device.log(JSON.stringify(ret)); } }); </textarea>
      <button class="btn btn_primary">device.checkApi</button>
      <li>显示消息接口</li>
      <textarea class="code"> device.showToast('测试'); </textarea>
      <button class="btn btn_primary">device.showToast</button>
      <li>发送消息旧接口</li>
      <textarea class="code"> device.send({ datapoint : [{ id : 500005, apiName : 'set_data_point', type : 'int32', value : 1 }], vibrate : 1, // 1为发送时振动，可选 onSuccess : function (ret) { // 发送成功回调 device.log('onSuccess: ' + JSON.stringify(ret)); }, onError : function (ret) { // 发送失败回调 device.log('onError: ' + JSON.stringify(ret)); } }); </textarea>
      <button class="btn btn_primary">device.send旧</button>
      <li>发送消息新接口</li>
      <textarea class="code"> device.send({ datapoint : [{ id : 500005, value : 1 }], vibrate : 1, // 1为发送时振动，可选 nfc : 1, // 1为近场通信方式，可选 lifetime : 20, // 生命期，范围1到604800秒，可选 onSuccess : function (ret) { // 发送成功回调 device.log('onSuccess: ' + JSON.stringify(ret)); }, onAck : function (ret) { // 接收响应成功回调 device.log('onAck: ' + JSON.stringify(ret)); }, onError : function (ret) { // 发送失败回调 device.log('onError: ' + JSON.stringify(ret)); } }); </textarea>
      <button class="btn btn_primary">device.send新</button>
      <li>接收消息接口</li>
      <textarea class="code"> device.onReceive(function (data) { device.log(JSON.stringify(data)); switch (data.id) { case 500001: device.showToast(data.value); break; case 500002: // do something break; } }); </textarea>
      <button class="btn btn_primary">device.onReceive</button>
      <li>查询数据接口<span class="version">&gt;= 安卓QQ 5.4</span><span class="version">&gt;= iOS QQ 5.8</span></li>
      <textarea class="code"> device.query({ list : [500003, 500004], /* list参数也支持下面这种写法，拉取多条数据 list : [{ num : 10, // 按条数拉取，可选 id : 500003 }, { id : 500004 } ], */ // interval : 5000, // 间隔毫秒，可选 onSuccess : function (ret) { // 查询成功回调 device.log('onSuccess: ' + JSON.stringify(ret)); ret.list.forEach(function (data) { switch (data.id) { case 500003: device.showToast(data.val_list[0].val); break; case 500004: // do something break; } }); }, onError : function (ret) { // 查询失败回调 device.log('onError: ' + JSON.stringify(ret)); } }); </textarea>
      <button class="btn btn_primary">device.query</button>
      <li>服务器推送接口<span class="version">&gt;= 安卓QQ 5.9</span><span class="version">&gt;= iOS QQ 5.9</span></li>
      <textarea class="code"> device.onServerPush(function (data) { device.log(JSON.stringify(data)); if (data.key == 'DPPushNotify' &amp;&amp; data.value) { device.query({ list : data.value.PropIDs, onSuccess : function (ret) { device.log('onSuccess: ' + JSON.stringify(ret)); // do something } }); } }); </textarea>
      <button class="btn btn_primary">device.onServerPush</button>
      <li>状态改变接口</li>
      <textarea class="code"> device.onChange(function (data) { device.log(JSON.stringify(data)); if (data.online == 0 || data.unbind) { // do something } }); </textarea>
      <button class="btn btn_primary">device.onChange</button>
     </ul>
    </div>
    <div class="interface_block">
     <h3 id="menu-video">视频接口</h3>
     <ul class="interface_list">
      <li>视频通话接口</li>
      <textarea class="code"> device.startVideoChat(); </textarea>
      <button class="btn btn_primary">device.startVideoChat</button>
      <li>视频留言接口</li>
      <textarea class="code"> device.startVideoMessage(); </textarea>
      <button class="btn btn_primary">device.startVideoMessage</button>
      <li>打开摄像头模板<span class="version">&gt;= 安卓QQ 5.6</span><span class="version">&gt;= iOS QQ 5.8</span></li>
      <textarea class="code"> device.openCameraControl(); </textarea>
      <button class="btn btn_primary">device.openCameraControl</button>
     </ul>
    </div>
    <div class="interface_block">
     <h3 id="menu-image">图像接口</h3>
     <ul class="interface_list">
      <li>图片上传接口<span class="version">&gt;= 安卓QQ 5.5</span><span class="version">&gt;= iOS QQ 5.9</span></li>
      <textarea class="code"> device.sendPicture(); </textarea>
      <button class="btn btn_primary">device.sendPicture</button>
      <li>拍照上传接口<span class="version">&gt;= 安卓QQ 5.5</span><span class="version">&gt;= iOS QQ 5.9</span></li>
      <textarea class="code"> device.takePicture(); </textarea>
      <button class="btn btn_primary">device.takePicture</button>
     </ul>
    </div>
    <div class="interface_block">
     <h3 id="menu-chat">消息通道接口</h3>
     <ul class="interface_list">
      <li>跳转消息通道接口<span class="version">&gt;= 安卓QQ 5.5</span><span class="version">&gt;= iOS QQ 5.8</span></li>
      <textarea class="code"> device.openDeviceMsg(); </textarea>
      <button class="btn btn_primary">device.openDeviceMsg</button>
     </ul>
    </div>
    <div class="interface_block">
     <h3 id="menu-share">分享接口</h3>
     <ul class="interface_list">
      <li>打开分享界面<span class="version">&gt;= 安卓QQ 5.6</span><span class="version">&gt;= iOS QQ 5.9</span></li>
      <textarea class="code"> device.sendShareMsg({ title : '标题', summary : '摘要', targetUrl : 'http://iot.qq.com', thumbUrl : 'http://i.gtimg.cn/qzonestyle/act/qzone_publicize_img/iotlogo.png' }); </textarea>
      <button class="btn btn_primary">device.sendShareMsg</button>
     </ul>
    </div>
    <div class="interface_block">
     <h3 id="menu-open-api">OpenAPI开放接口</h3>
     <ul class="interface_list">
      <li>获取当前用户信息<span class="version">&gt;= 安卓QQ 5.4</span><span class="version">&gt;= iOS QQ 5.8</span></li>
      <textarea class="code"> device.openApi({ name : 'mb_get_user_info', /*params : { // 可选参数 },*/ onSuccess : function (ret) { // 成功回调 device.log('onSuccess: ' + JSON.stringify(ret)); device.log('头像：' + '&lt;img src=&quot;' + ret.figureurl_qq_1 + '&quot;&gt;' + '，昵称：' + ret.nickname); }, onError : function (ret) { // 失败回调 device.log('onError: ' + JSON.stringify(ret)); } }); </textarea>
      <button class="btn btn_primary">device.openApi</button>
     </ul>
    </div>
   </div>
  </div>
  <script>var getUrlParam=function(c,d,e){var f=new RegExp("(?:^|[?&#])"+c+"=([^?&#]*)","i"),a=f.exec(d||window.location.href),b=a?a[1]:"";return e?b:decodeURIComponent(b)},ping=function(b){var a=document.createElement("img");a.onload=a.onerror=function(){a=null};a.src=b;setTimeout(function(){},1000)},hotClick=function(c,a,b){if(!c){return}a=a||"sng.qq.com";b=b||window.location.pathname;var d=["http://pinghot.qq.com/pingd?dm=",a,".hot&url=",b,"&hottag=",c,"&hotx=9999&hoty=9999&sds=",Math.random()].join("");ping(d)},pv=function(d,b,a){var e=function(i,j,g){var m=/(?:^|;+|\s+)pgv_pvid=([^;]*)/i,n=/(?:^|;+|\s+)pgv_info=([^;]*)/i,o=/[\?\#]/,p=function(){var r,s,u,v;r=document.cookie.match(m);r&&r.length&&r.length>1?s=r[1]:(s=Math.round(Math.random()*2147483647)*(new Date().getUTCMilliseconds())%10000000000,document.cookie="pgv_pvid="+s+"; path=/; domain=qq.com; expires=Sun, 18 Jan 2038 00:00:00 GMT;");u=document.cookie.match(n);!u&&(v=Math.round(Math.random()*2147483647)*(new Date().getUTCMilliseconds())%10000000000,document.cookie="pgv_info=ssid=s"+v+"; path=/; domain=qq.com;");return s}();i=i||location.hostname||"-";j=j||location.pathname;g=g||{};g.referURL=g.referURL||document.referrer;var h,k,l;h=g.referURL.split(o);h=h[0];h=h.split("/");k=h[2]||"-";l="/"+h.slice(3).join("/");g.referDomain=g.referDomain||k;g.referPath=g.referPath||l;var q="http://pingfore.qq.com/pingd?cc=-&ct=-&java=1&lang=-&pf=-&scl=-&scr=-&tt=-&tz=-8&vs=3.3&flash=&dm="+i+"&url="+j+"&rdm="+g.referDomain+"&rurl="+g.referPath+"&pgv_pvid="+p+"&sds="+Math.random();ping(q)};a=a||{};var c=getUrlParam("from");if(c){b=b||location.pathname;var f=b.replace(/\..+/,"").split("/").slice(-2).join("-");a.referDomain="ADTAG";a.referPath=f+"."+c}e(d,b,a)};window.JsBridge=function(k,s){k=k||{};k=k||{};k.iOS=/iPad|iPhone|iPod/.test(navigator.userAgent);k.android=navigator.userAgent.indexOf("Android")>=0;k.iOS&&k.android&&(k.iOS=false);typeof Array.prototype.forEach!="function"&&(Array.prototype.forEach=function(b,c){for(var a=0,d=this.length;a<d;a++){typeof b=="function"&&Object.prototype.hasOwnProperty.call(this,a)&&b.call(c,this[a],a,this)}});var n=[];function t(){var a=document.createElement("iframe");a.className="_jsb";a.style.cssText="position:absolute;left:0;top:0;width:0;height:0;visibility:hidden;";a.frameBorder="0";document.body.appendChild(a);return a}k._createMultiCallback=function(a,b){return function(c){a.result[b]=c;a.count--;a.count==0&&a.callback&&(c=a.callback(a.result),c&&typeof c=="object"&&k.multiCall.apply(k,[c].concat(a.callbackChain)))}};k._callWithScheme=k.callWithScheme=function(b){n=document.querySelectorAll("iframe._jsb");var a;for(var c=0;a=n[c];c++){if(!a._busy){break}}(!a||a._busy)&&(a=t());a._busy=true;a.src=b;setTimeout(function(){a._busy=false},0);window.device&&device.log(decodeURIComponent(b),"#0ff")};var l=[],o=function(a){l=[a]};k.onResume=o;k.addResumeEventListener=function(a){var b=l.indexOf(a);b<0&&l.push(a)};k.removeResumeEventListener=function(b){var a=l.indexOf(b);a>=0&&(l=l.slice(0,a).concat(l.slice(a+1)))};k._onResume=function(){k.onResume!=o?typeof k.onResume=="function"?k.onResume():l=[]:l.slice(0).forEach(function(a){a()})};k.ready=false;var p=[];k.onReady=function(a){k.ready?a&&a():a&&p.push(a)};k._readyCallback=function(){if(k.ready){return}k.ready=true;p.slice(0).forEach(function(a){a()})};k._coreReadyCallback=k._readyCallback;var q=1,m={},r=k._call=k.call=function(e){var c=[],b=[],d=false;[].slice.call(arguments,1).forEach(function(f){typeof f=="function"?(b.push(f),d=true):!d&&c.push(f)});var a=["jsbridge:/",e];a.push(q);c.forEach(function(f){a.push(encodeURIComponent(typeof f=="object"?JSON.stringify(f):f+""))});a=a.join("/");m[q++]={callback:b[0],callbackChain:b.slice(1)};k._callWithScheme(a)};k.multiCall=function(a,e){var b={callback:e,callbackChain:[].slice.call(arguments,2),count:0,result:{}};for(var c in a){var d=a[c];b.count++;r.apply(null,[d.name].concat(d.args||[]).concat([k._createMultiCallback(b,c)]))}};k.callback=function(d,a){if(d=="resume"){k._onResume();return}var b,c,e;a&&a.r==0&&(isFinite(d)?m[d]&&(b=m[d],e=b.callbackChain,c=b.callback&&b.callback(a.result),delete m[d]):a.guid&&m[a.guid]&&(b=m[a.guid],e=b.callbackChain,c=b.callback&&b.callback(a.data),delete m[a.guid]));c&&typeof c=="object"&&r.apply(null,[c.name].concat(c.args||[]).concat(e||[]))};s.QzoneApp={fire:function(a,b){k.callback(a,b)}};k._coreReadyCallback();return k}(window.JsBridge,window);window.Stat=function(D){var s="http://fusionbase.qq.com/cgi-bin/appstage/light_app_report",t=function(c,d,e){var f=new RegExp("(?:^|[?&#])"+c+"=([^?&#]*)","i"),a=f.exec(d||window.location.href),b=a?a[1]:"";return e?b:decodeURIComponent(b)},u=function(b){var a=[];for(var c in b){a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]))}a=a.concat([].slice.call(arguments,1));return a.join("&")},w=function(b){var a=document.createElement("img");a.onload=a.onerror=function(){a=null};a.src=b;setTimeout(function(){},1000)},x=function(a){a=a||{};var b=new XMLHttpRequest();b.open("POST",a.url,true);b.withCredentials=true;b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");b.send(u(a.params))},y=function(b){var c=new RegExp("(?:^|;+|\\s+)"+b+"=([^;]*)"),a=document.cookie.match(c);return a?a[1]:""},z=function(){var a=y("uin").match(/\d+/);return a?+a[0]:0},r=navigator.userAgent,p;r.indexOf("Android")>-1?p=1:/iPhone|iPad|iPod/.test(r)?p=2:/Windows Phone|WPDesktop/.test(r)?p=3:p=4;var A=/QQ\/([\d\.]+)/,B=function(a){return a?a[1]:"0"}(r.match(A)),q={platform:p+"",version:B,pid:t("productId"),din:t("din"),uin:z()+""},C={100:{tid:0,list:[]},200:{tid:0,list:[]}},v=function(e,a,c){if(!a||!e){return}var b=C[e];typeof a=="string"&&(a=a.split(","));typeof c=="string"&&(c=c.split(","));for(var d=0,g=a.length;d<g;d++){if(a[d]){var f={platform:q.platform,version:q.version,pid:q.pid,din:q.din,uin:q.uin,via:a[d],reserve1:e};c&&c[d]&&(f.reserve2=c[d]);b.list.push(f)}}!b.tid&&(b.tid=setTimeout(function(){var h=b.list.length;if(!h){return}var i={data:JSON.stringify({list:b.list}),r:Math.random()};h>4?x({url:s,params:i}):w(s+"?"+u(i));b.tid=0;b.list=[]},200))};return{exposure:function(a,b){v(100,a,b)},click:function(a,b){v(200,a,b)}}}(window);window.device=function(ad,ab,aj){var aE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(c){var f=typeof Uint8Array!=="undefined"?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),b="0".charCodeAt(0),d="a".charCodeAt(0),e="A".charCodeAt(0),i="-".charCodeAt(0),j="_".charCodeAt(0);function a(o){var n=o.charCodeAt(0);if(n===g||n===i){return 62}if(n===h||n===j){return 63}if(n<b){return-1}if(n<b+10){return n-b+26+26}if(n<e+26){return n-e}if(n<d+26){return n-d+26}}function l(n){var o,t,u,p,r,s;if(n.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var v=n.length;r="="===n.charAt(v-2)?2:"="===n.charAt(v-1)?1:0;s=new f(n.length*3/4-r);u=r>0?n.length-4:n.length;var w=0;function q(x){s[w++]=x}for(o=0,t=0;o<u;o+=4,t+=3){p=a(n.charAt(o))<<18|a(n.charAt(o+1))<<12|a(n.charAt(o+2))<<6|a(n.charAt(o+3));q((p&0xFF0000)>>16);q((p&0xFF00)>>8);q(p&0xFF)}r===2?(p=a(n.charAt(o))<<2|a(n.charAt(o+1))>>4,q(p&0xFF)):r===1&&(p=a(n.charAt(o))<<10|a(n.charAt(o+1))<<4|a(n.charAt(o+2))>>2,q(p>>8&0xFF),q(p&0xFF));return s}function m(n){var r,s=n.length%3,o="",p,t;function q(v){return aE.charAt(v)}function u(v){return q(v>>18&0x3F)+q(v>>12&0x3F)+q(v>>6&0x3F)+q(v&0x3F)}for(r=0,t=n.length-s;r<t;r+=3){p=(n[r]<<16)+(n[r+1]<<8)+n[r+2];o+=u(p)}switch(s){case 1:p=n[n.length-1];o+=q(p>>2);o+=q(p<<4&0x3F);o+="==";break;case 2:p=(n[n.length-2]<<8)+n[n.length-1];o+=q(p>>10);o+=q(p>>4&0x3F);o+=q(p<<2&0x3F);o+="=";break}return o}c.toByteArray=l;c.fromByteArray=m}(typeof ag==="undefined"?this.base64={}:ag);var aF=navigator.userAgent;ad.QQVersion=function(){var a=aF.match(/QQ\/([\d\.]+)/);return a?a[1]:"0"}();var aq=function(b,c){b=String(b).split(".");c=String(c).split(".");try{for(var a=0,f=Math.max(b.length,c.length);a<f;a++){var d=isFinite(b[a])&&Number(b[a])||0,e=isFinite(c[a])&&Number(c[a])||0;if(d<e){return-1}else if(d>e){return 1}}}catch(g){return-1}return 0},ar=function(a){return typeof a=="string"?document.getElementById(a):a},k=function(a){return null===a?"null":void 0===a?"undefined":Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},ae=function(c,d,e){var f=new RegExp("(?:^|[?&#])"+c+"=([^?&#]*)","i"),a=f.exec(d||window.location.href),b=a?a[1]:"";return e?b:decodeURIComponent(b)},at=function(b){var a=[];for(var c in b){a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]))}a=a.concat([].slice.call(arguments,1));return a.join("&")},aG=function(b){var c=new RegExp("(?:^|;+|\\s+)"+b+"=([^;]*)"),a=document.cookie.match(c);return a?a[1]:""},aH=function(c,d,e,f,a){if(a){var b=new Date();b.setTime(b.getTime()+3600000*a)}var g=a?"expires="+b.toGMTString()+"; ":"",h="path="+(f||"/")+"; ",i="domain="+(e||document.domain)+";";document.cookie=c+"="+d+"; "+g+h+i},au=function(a,b,d,e){if((a=String(a)).length<b){var c=new Array(b-a.length);c[e?"unshift":"push"](a);a=c.join(d||"0")}return a},av=function(a){var b=new XMLHttpRequest();a.method=(a.method||"GET").toUpperCase();a.method=="GET"&&(a.url+=(a.url.indexOf("?")>-1?"&":"?")+at(a.params));b.open(a.method,a.url,true);b.onload=function(){var c;try{c=JSON.parse(b.responseText)}catch(d){c={code:-998,msg:"数据解析失败"}}c.code==undefined&&(c.code=c.ret);a.onSuccess&&a.onSuccess(c)};b.onerror=function(){a.onError&&a.onError({code:-999,msg:"请求失败"})};a.withCredentials&&(b.withCredentials=true);a.method=="POST"?a.requestType=="json"?b.send(JSON.stringify(a.params)):(b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.send(at(a.params))):b.send(null)},aI=["log","checkApi"],aw={"5.4":["onReceive","onChange","send","startVideoChat","startVideoMessage","showToast","query","openApi"],"5.5":["sendPicture","takePicture","openDeviceMsg"],"5.6":["openCameraControl","sendShareMsg","openFile"],"5.7":["openCameraControlEx"],"5.8":["onPushData"],"5.9":["onServerPush"]},ax={"5.6":["onReceive","onChange","send","startVideoChat","startVideoMessage","showToast"],"5.8":["openDeviceMsg","openCameraControl","onPushData","query","openApi"],"5.9":["onServerPush","sendPicture","takePicture","sendShareMsg"]},ay=function(b,a){for(var c in a){if(a[c].indexOf(b)>-1){return true}}return false},ac={success:0,args:-1,version:-2,iOS:-3,platform:-4},ak={0:"执行成功","-1":"缺少必要的参数或参数错误","-2":"为了更好地使用该功能，请先将手机QQ升级到最新版本","-3":"该功能暂不支持iOS版，可先使用Android手机QQ体验","-4":"该功能暂不支持该平台，请使用最新Android/iOS手机QQ重试"},af=function(b,e){if(device.debug!==true){return}b=k(b)!="string"?JSON.stringify(b):b;ad.console&&ad.console.log("%c"+b,"color:"+(e||""));var a=ar("device-log-dialog");if(!a){document.body.lastElementChild.insertAdjacentHTML("afterEnd",['<div id="device-log-dialog" draggable="true" style="position: fixed;z-index: 9999;top: 10px;left: 10px;font-size: 14px;width: 300px;background-color: rgba(0,0,0,.8);color: #FFF;word-break: break-all;">','<div style="padding: 5px;background-color: #000;font-weight: bold;">',"<span>调试模式</span>",'<span id="device-log-close" style="float: right;color: yellow;">关闭</span>','<span ontouchend="location.reload(true);" style="float: right;color: yellow;margin-right: 10px;">刷新</span>','<span ontouchend="device.log(location.href);" style="float: right;color: yellow;margin-right: 10px;">地址</span>',"</div>",'<div style="padding: 5px;max-height: 300px;overflow: auto;"><p style="float: right;">End</p></div>',"</div>"].join(""));a=ar("device-log-dialog");var f=ar("device-log-close");f.onclick=f.ontouchend=function(i){i.preventDefault();a.parentNode.removeChild(a)};var g=0,h=0;a.firstElementChild.ontouchstart=function(j){var i=j.changedTouches[0];g=i.clientX-a.offsetLeft;h=i.clientY-a.offsetTop};a.firstElementChild.ontouchmove=function(i){i.preventDefault();var j=i.changedTouches[0];a.style.left=j.clientX-g+"px";a.style.top=Math.max(0,j.clientY-h)+"px"};var c=0;a.lastElementChild.ontouchstart=function(i){var j=i.changedTouches[0];c=j.clientY};a.lastElementChild.ontouchmove=function(i){i.stopPropagation();var j=i.changedTouches[0];(j.clientY>c&&this.scrollTop<=0||j.clientY<c&&this.scrollTop+this.offsetHeight>=this.scrollHeight)&&i.preventDefault()}}var d=new Date();a.lastElementChild.insertAdjacentHTML("afterBegin",['<p style="border-bottom: 1px dashed gray;">','<span style="font-weight:bold;">'+(au(d.getHours(),2)+":"+au(d.getMinutes(),2)+":"+au(d.getSeconds(),2))+"</span>: ",'<span style="color:'+(e||"")+';">'+b+"</span>","</p>"].join(""))},az=function(a){if(k(a)!="object"||k(a.list)!="array"||k(a.onSuccess)!="function"){return ac.args}var b={},c=ab.iOS?ax:ab.android?aw:{};a.list.forEach(function(d){b[d]=false;if(aI.indexOf(d)>-1){b[d]=true}else{for(var e in c){if(aq(ad.QQVersion,e)>=0&&c[e].indexOf(d)>-1){b[d]=true;break}}}});a.onSuccess(b)},aJ=function(b,c){var a;device.noCheck?a=c?c():0:az({list:[b],onSuccess:function(d){d[b]?a=c?c():0:ab.iOS&&ay(b,aw)&&!ay(b,ax)?(a=ac.iOS,ao(ak[a])):ab.android||ab.iOS?(a=ac.version,ao(ak[a])):(a=ac.platform,af(ak[a],"red"))}});a=a||ac.success;return{code:a,msg:ak[a]}},ah=aG("iot_send_id")||0,am=ah,aA=function(){},aB=function(){},aC=function(){},aD=function(){},ai={},al={},an={};ad.pushData=function(a){a=k(a)=="string"?JSON.parse(a):a;af("pushData: "+JSON.stringify(a),"yellow");aA(a)};ad.serverPush=function(a){a=k(a)=="string"?JSON.parse(a):a;af("serverPush: "+JSON.stringify(a),"yellow");aB(a)};ad.onReceiveDataPoint=function(a){a=k(a)=="string"?JSON.parse(a):a;a.type=="bytearray"&&(a.value=base64.toByteArray(a.value));af("onReceiveDataPoint: "+JSON.stringify(a),"lime");aC(a);var b=a.seq;b&&ai[b]&&(a.msg="接收成功",ai[b](a),delete ai[b])};ad.onDeviceInfoChange=function(a){a=k(a)=="string"?JSON.parse(a):a;af("onDeviceInfoChange: "+JSON.stringify(a),"yellow");aD(a)};ad.onSendDataPointResult=function(a){a=k(a)=="string"?JSON.parse(a):a;var b=a.cookie;a.sendResult==1?(a.msg=a.msg||"发送成功",af("onSendDataPointResult: "+JSON.stringify(a),"lime"),ai[b]&&(ai[b](a),al[b]&&delete ai[b])):(a.msg=a.msg||(a.sendResult==2?"发送频率过高":"发送失败"),af("onSendDataPointResult: "+JSON.stringify(a),"red"),an[b]&&(an[b](a),delete an[b]))};ad.onAckDataPoint=function(a){a=k(a)=="string"?JSON.parse(a):a;var b=a.cookie;a.msg=a.msg||"接收成功";af("onAckDataPoint: "+JSON.stringify(a),"lime");al[b]&&(al[b](a),delete al[b])};var aZ=function(a){if(k(a)!="function"){return ac.args}aA=a},aK=function(a){if(k(a)!="function"){return ac.args}aB=a},aL=function(a){if(k(a)!="function"){return ac.args}aC=a},aM=function(a){if(k(a)!="function"){return ac.args}aD=a},aN=function(a,b,c,d){k(b)=="function"&&(ai[a]=b);k(c)=="function"&&(al[a]=c);k(d)=="function"&&(an[a]=d)},aO=function(a){if(k(a)!="object"||k(a.datapoint)!="array"&&k(a.datapoint)!="object"){return ac.args}++am==Math.pow(2,16)&&(am=0);++ah==Math.pow(2,16)&&(ah=0);aH("iot_send_id",ah,null,null,0.1);var b={};k(a.datapoint)=="object"?b.datapoint=[a.datapoint]:b.datapoint=a.datapoint;if(aq(ad.QQVersion,"5.8")>=0){b.cookie=ah;k(a.onAck)=="function"&&(b.ack=1)}else if(b.datapoint[0].type==undefined||k(a.onAck)=="function"){ao(ak[ac.version]);return ac.version}b.datapoint.forEach(function(c){aq(ad.QQVersion,"5.8")<0&&(c.seq=am,c.cookie=ah,c.apiName=c.apiName||"set_data_point",c.type==undefined&&(k(c.value)=="number"?c.type="int32":k(c.value)=="array"?c.type="bytearray":c.type="string"));c.type=="bytearray"&&(c.seq=c.seq!=undefined?c.seq:am,c.value=base64.fromByteArray(c.value))});a.vibrate!=undefined&&(b.vibrate=a.vibrate);a.nfc!=undefined&&(b.nfc=a.nfc);a.lifetime!=undefined&&(b.lifetime=Math.max(1,Math.min(a.lifetime,604800))||604800);aN(ah,a.onSuccess,a.onAck,a.onError);ab.call("deviceapp/sendDataPoint",b)},aP=function(a){if(k(a)!="object"||k(a.list)!="array"||k(a.onSuccess)!="function"||a.onError!==undefined&&k(a.onError)!="function"){return ac.args}a.interval!=undefined&&(a.interval=Math.max(1000,a.interval));var b=[];a.list.forEach(function(c){k(c)=="object"?(c.propertyid=+c.id,delete c.id,c.num!=undefined?(c.num=c.num+"",c.type="1"):c.begin_time!=undefined||c.end_time!=undefined?c.type="2":(c.num="1",c.type="1"),b.push(c)):b.push({propertyid:+c,type:"1",num:"1"})});setTimeout(function(){av({url:"http://device.qq.com/cgi-bin/appstage/app_get_datapoint_v3",params:{din:ae("din"),appid:ae("appid"),openid:ae("openId"),openkey:ae("openkey"),data:JSON.stringify({data:b})},onSuccess:function(c){c.code==0?a.onSuccess(c):a.onError&&a.onError(c)},onError:a.onError});a.interval&&setTimeout(arguments.callee,a.interval)},0)},aQ=function(a){if(k(a)!="object"||k(a.name)!="string"||a.params!==undefined&&k(a.params)!="object"||k(a.onSuccess)!="function"||a.onError!==undefined&&k(a.onError)!="function"){return ac.args}a.params=a.params||{};av({method:"POST",requestType:"json",url:"https://yun.tim.qq.com/v4/SmartDeviceApi/"+a.name+"?apn=0",params:{din:ae("din"),appid:ae("appid"),pid:ae("productId"),openid:ae("openId"),openkey:ae("openkey"),params:at(a.params)},onSuccess:function(b){b.code==0?a.onSuccess(b):a.onError&&a.onError(b)},onError:a.onError})},ao=function(a){a=a||"";ab.call("deviceapp/showToast",a)},aR=function(a){ab.call("deviceapp/startVideoChat",a||"");aj.click("QQCONNECT_VIDEO_CALL")},aS=function(a){ab.call("deviceapp/startVideoMessage",a||"");aj.click("QQCONNECT_VIDEO_MESSAGE")},aT=function(a){ab.call("deviceapp/sendPicture",a||"");aj.click("QQCONNECT_PICTURE_UPLODE")},aU=function(a){ab.call("deviceapp/takePicture",a||"");aj.click("QQCONNECT_PHOTO_UPLODE")},aV=function(a){ab.call("deviceapp/openDeviceMsg",a||"")},aW=function(a){ab.call("deviceapp/openCameraControl",a||"")},aX=function(a){ab.call("deviceapp/openCameraControlEx",a||"")},aY=function(a){ab.call("deviceapp/sendShareMsg",a||"")},a0=function(a){ab.call("deviceapp/sendFile",a||"")};aj.exposure("QQCONNECT_APP_SHOW");var ag={log:af,checkApi:az,onServerPush:aK,onReceive:aL,onChange:aM,send:aO,query:aP,openApi:aQ,startVideoChat:aR,startVideoMessage:aS,showToast:ao,sendPicture:aT,takePicture:aU,openDeviceMsg:aV,openCameraControl:aW,sendShareMsg:aY};/(qq\.com)$/.test(window.location.hostname)&&(ag.openCameraControlEx=aX);for(var ap in ag){k(ag[ap])=="function"&&(ag[ap]=function(a,b){return function(){var c=arguments;return aJ(a,function(){return b.apply(ag,c)})}}(ap,ag[ap]))}return ag}(window,window.JsBridge,window.Stat);window.TMPL=window.TMPL||{};function escHTML(a){if(!a){return a}var b=document.createElement("div");b.innerHTML="";b.appendChild(document.createTextNode(a));return b.innerHTML}function $d(a){return typeof a=="string"?document.getElementById(a):a}function $(a){return document.querySelector(a)}function $$(a){return document.querySelectorAll(a)}function $child(a,b){return a.querySelector(b)}function $$child(a,b){return a.querySelectorAll(b)}function $each(a,b){[].forEach.call(a,b)}function getUrlParam(c,d,e){var f=new RegExp("(?:^|[?&#])"+c+"=([^?&#]*)","i"),a=f.exec(d||window.location.href),b=a?a[1]:"";return e?b:decodeURIComponent(b)}function serializeParam(b){var a=[];for(var c in b){a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]))}a=a.concat([].slice.call(arguments,1));return a.join("&")}function getCookie(b){var c=new RegExp("(?:^|;+|\\s+)"+b+"=([^;]*)"),a=document.cookie.match(c);return a?a[1]:""}function setCookie(c,d,e,f,a){if(a){var b=new Date();b.setTime(b.getTime()+3600000*a)}var g=a?"expires="+b.toGMTString()+"; ":"",h="path="+(f||"/")+"; ",i="domain="+(e||document.domain)+";";document.cookie=c+"="+d+"; "+g+h+i}function delCookie(a,b,c){var d="expires=Mon, 26 Jul 1997 05:00:00 GMT; ",e="path="+(c||"/")+"; ",f="domain="+(b||document.domain)+";";document.cookie=a+"=; "+d+e+f}function getUin(){var a=getCookie("uin").match(/\d+/);return a?+a[0]:0}function getType(b){return null===b?"null":void 0===b?"undefined":Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}function split2Object(g,d,a,e){var f={},c,b,h,k;if(!g||typeof g!="string"){return f}(typeof d!="string"||getType(d)!="regexp")&&(d=/[?&#]/);typeof a!="string"&&(a="");typeof e!="string"&&(e="=");c=g.split(d);if(c&&c.length){for(var j=0,m=c.length;j<m;++j){b=c[j].split(e);b.length>1?(k=b.slice(1).join(e),h=k.split(a),f[b[0]]=decodeURIComponent(h.slice(a.length,h.length-a.length).join(a))):b[0]&&(f[b[0]]=true)}}return f}</script>
  <script>device.debug=true;$d("QQVersion").innerHTML=window.QQVersion;window.onload=function(){setTimeout(function(){$each($$("textarea"),function(a){a.style.height=a.scrollHeight+"px"})},200)};$d("api_all").onclick=function(b){var c=b.target;if(c.className.indexOf("btn_primary")>-1){try{var a=eval(c.previousElementSibling.value);a&&a.code!=undefined?a.code==0?device.log(a.msg,"lime"):device.log(a.msg,"red"):device.log(a)}catch(b){device.log(b.message,"red")}}};pv("iot.qq.com");</script>
  <!--[if !IE]>|xGv00|9905a873c2f7497c0c0cd7e24cc02554<![endif]-->
 </body>
</html>